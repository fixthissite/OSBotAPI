<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Lemons OSBot API by Lem0ns</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-dark.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="javascripts/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="stylesheets/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

  </head>
  <body>
      <div id="header">
        <nav>
          <li class="fork"><a href="https://github.com/Lem0ns/OSBotAPI">View On GitHub</a></li>
          <li class="downloads"><a href="https://github.com/Lem0ns/OSBotAPI/zipball/master">ZIP</a></li>
          <li class="downloads"><a href="https://github.com/Lem0ns/OSBotAPI/tarball/master">TAR</a></li>
          <li class="title">DOWNLOADS</li>
        </nav>
      </div><!-- end header -->

    <div class="wrapper">

      <section>
        <div id="title">
          <h1>Lemons OSBot API</h1>
          <p>&quot;lemons&quot; API</p>
          <hr>
          <span class="credits left">Project maintained by <a href="https://github.com/Lem0ns">Lem0ns</a></span>
          <span class="credits right">Hosted on GitHub Pages &mdash; Theme by <a href="https://twitter.com/michigangraham">mattgraham</a></span>
        </div>

        <h2>
<a id="wtf-is-this" class="anchor" href="#wtf-is-this" aria-hidden="true"><span class="octicon octicon-link"></span></a>wtf is this?</h2>

<p>This is my personal "API", or extension of OSBot's normal API (as a note I use Framework/API interchangeably in this document.) It has a few extra features, namely:</p>

<ul>
<li>Web Walker (web data is wip, contact me to help/add an area to the map)</li>
<li>Alternate Interactions (wip)</li>
<li>Task system encourages reusable, configurable code</li>
<li>Helper functions to make life easier</li>
<li>No more filters, just Lambda goodness!</li>
<li>Probably some stuff I forgot about (lol)</li>
</ul>

<h2>
<a id="before-you-get-going" class="anchor" href="#before-you-get-going" aria-hidden="true"><span class="octicon octicon-link"></span></a>Before you get going...</h2>

<p>If you are planning on using this, great! Make sure to report bugs ASAP, so I can do something about them. Use the bug tracker on here, or contact me at:</p>

<p>Skype: <a href="mailto:admin@gfxtub.com">admin@gfxtub.com</a></p>

<p>Steam/OSBot: dudeami</p>

<p>Feel free to ask me anything you want, anytime, for any reason. If I don't answer, it's probably because I don't sit at the computer all day :p. I'll get with you ASAP though!</p>

<p>Please leave some info so I know why I want to add you, thanks!</p>

<h2>
<a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Documentation</h2>

<p><a href="https://github.com/Lem0ns/OSBotAPI/wiki">Go to documentation</a></p>

<h2>
<a id="quick-overview-of-tasks" class="anchor" href="#quick-overview-of-tasks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Quick overview of "Tasks"</h2>

<p>Probably the single biggest difference in scripts is the "Task" system. Basically, instead of one large Script that contains a bunch of if statements/states/etc, we split it up like a "node" system into seperate classes. The improvement the Tasks have is they have access to the OSBot API and lemons API just like a normal Script would.</p>

<h3>
<a id="making-a-simple-task" class="anchor" href="#making-a-simple-task" aria-hidden="true"><span class="octicon octicon-link"></span></a>Making a simple Task</h3>

<p>So, let's say you want to make a simple task. Let's get real generic and say were chopping down a Tree. So, we make a new <code>AbstractTask</code> "ChopTreeTask":</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">lemons.api.script.entities.RS2Object</span>;
<span class="pl-k">import</span> <span class="pl-smi">lemons.api.tasks.templates.AbstractTask</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">ChopDownTreeTask</span> <span class="pl-k">extends</span> <span class="pl-e">AbstractTask</span> {

    <span class="pl-k">private</span> <span class="pl-k">String</span>[] names;

    <span class="pl-k">public</span> <span class="pl-en">ChopDownTreeTask</span>(<span class="pl-smi">String</span>... <span class="pl-v">treeTypes</span>) {
        <span class="pl-c">// OSBot and lemons API is not available</span>
        names <span class="pl-k">=</span> treeTypes;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onStart</span>() {
        <span class="pl-v">super</span><span class="pl-k">.</span>onStart();

        <span class="pl-c">// Ran when the Task is added, used to initialize the script</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onTaskStart</span>() {
        <span class="pl-c">// Task is now active, init if needed</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onTaskFinish</span>() {
        <span class="pl-c">// Task is no longer active, clean up</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">run</span>() {
        <span class="pl-c">// Equal to "onLoop" but with no return</span>
        <span class="pl-k">if</span> (getTree()<span class="pl-k">.</span>interact(<span class="pl-s"><span class="pl-pds">"</span>Chop down<span class="pl-pds">"</span></span>)) {
            sleepMoving(<span class="pl-c1">5000</span>);
            sleep(<span class="pl-c1">2000</span>, () <span class="pl-k">-</span><span class="pl-k">&gt;</span> <span class="pl-k">!</span>myPlayer()<span class="pl-k">.</span>isAnimating());
        }
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">isActive</span>() {
        <span class="pl-c">// Checks if the task can be ran</span>
        <span class="pl-k">return</span> <span class="pl-k">!</span>getInventory()<span class="pl-k">.</span>isFull()
                <span class="pl-k">&amp;&amp;</span> getTree() <span class="pl-k">!=</span> <span class="pl-c1">null</span>
                <span class="pl-k">&amp;&amp;</span> <span class="pl-k">!</span>myPlayer()<span class="pl-k">.</span>isAnimating();
    }

    <span class="pl-k">public</span> <span class="pl-smi">RS2Object</span> <span class="pl-en">getTree</span>() {
        <span class="pl-c">// Note the EntityAPI here is different, this is to add</span>
        <span class="pl-c">// additional helpers to the object and to replace lost</span>
        <span class="pl-c">// functionality from filters.</span>
        <span class="pl-k">return</span> getObjects()<span class="pl-k">.</span>closest(o <span class="pl-k">-</span><span class="pl-k">&gt;</span> o<span class="pl-k">.</span>hasName(names));
    }

}</pre></div>

<h3>
<a id="building-the-script" class="anchor" href="#building-the-script" aria-hidden="true"><span class="octicon octicon-link"></span></a>Building the Script</h3>

<p>But, that is only one part of the puzzle right? Well, that is the point. Now, wherever you need to chop down a tree, you can simply add that Task. Let's say we want to take that <code>ChopTreeTask</code>, and make it into a power cutter. Simple, we just make a "Controller" (either a <code>ComplexTask</code> or ultimately a <code>TaskScript</code>) to run it. So, we'll make a new <code>TaskScript</code> for this example:</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">org.osbot.rs07.api.ui.Skill</span>;

<span class="pl-k">import</span> <span class="pl-smi">lemons.api.script.TaskScript</span>;

<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TreeChopper</span> <span class="pl-k">extends</span> <span class="pl-e">TaskScript</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onStart</span>() {
        <span class="pl-v">super</span><span class="pl-k">.</span>onStart();

        <span class="pl-c">// Set the tasks in the order you want them executed</span>

        <span class="pl-c">// We want to drop logs, luckily the API already contains this task</span>
        <span class="pl-c">// Feel free to make your own though!</span>
        addTask(<span class="pl-k">new</span> <span class="pl-smi">DropperTask</span>()
            .drop(<span class="pl-s"><span class="pl-pds">"</span>Logs<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Oak logs<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>Willow logs<span class="pl-pds">"</span></span>));

        <span class="pl-c">// Let's add willow tree chopping</span>
        addTask(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> lvl() <span class="pl-k">&gt;=</span> <span class="pl-c1">30</span>, <span class="pl-k">new</span> <span class="pl-smi">ChopDownTreeTask</span>(<span class="pl-s"><span class="pl-pds">"</span>Willow tree<span class="pl-pds">"</span></span>));
        <span class="pl-c">// The lambda confuse you? Heres a more syntax'ed version</span>
        addTask(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> {
            <span class="pl-k">return</span> lvl() <span class="pl-k">&gt;=</span> <span class="pl-c1">15</span>;
        }, <span class="pl-k">new</span> <span class="pl-smi">ChopDownTreeTask</span>(<span class="pl-s"><span class="pl-pds">"</span>Oak tree<span class="pl-pds">"</span></span>));
        <span class="pl-c">// For more info, google "Java Lambda"</span>
        addTask(<span class="pl-k">new</span> <span class="pl-smi">ChopDownTreeTask</span>(<span class="pl-s"><span class="pl-pds">"</span>Tree<span class="pl-pds">"</span></span>));
    }

    <span class="pl-k">private</span> <span class="pl-k">int</span> <span class="pl-en">lvl</span>() {
        <span class="pl-k">return</span> getSkills()<span class="pl-k">.</span>getStatic(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>);
    }

}</pre></div>

<p>Now, we have a script that could run (it is missing a <code>ScriptManifest</code> though!). So, wheres the loop? Well, remember we moved all the "Script" stuff to the Task system, specifically <code>AbstractTask</code>. So, <code>TaskScript.addTask</code> simply adds a new Task to the queue. The queue is then ran in order every loop, top to bottom. This will behave similar to a script that checks states at the start of every loop, or the dreaded <code>if {} else ...</code> stack. This example also laminates how setting up parameters can make the Task reusable for multiple purposes, though this is a fairly simple example.</p>

<h3>
<a id="adding-a-little-lemon" class="anchor" href="#adding-a-little-lemon" aria-hidden="true"><span class="octicon octicon-link"></span></a>Adding a little lemon</h3>

<p>So, you can chop wood and drop it, but we want more. So, let's put the API to use and add equipment handling, banking, and walking back to the area.</p>

<div class="highlight highlight-java"><pre><span class="pl-k">import</span> <span class="pl-smi">org.osbot.rs07.api.map.Position</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.osbot.rs07.api.ui.EquipmentSlot</span>;
<span class="pl-k">import</span> <span class="pl-smi">org.osbot.rs07.api.ui.Skill</span>;

<span class="pl-k">import</span> <span class="pl-smi">lemons.api.script.TaskScript</span>;
<span class="pl-k">import</span> <span class="pl-smi">lemons.api.tasks.DropperTask</span>;
<span class="pl-k">import</span> <span class="pl-smi">lemons.api.tasks.WalkingTask</span>;
<span class="pl-k">import</span> <span class="pl-smi">lemons.api.tasks.banking.EquipmentReq</span>;
<span class="pl-k">import</span> <span class="pl-smi">lemons.api.tasks.banking.EquipmentReqTask</span>;
<span class="pl-k">import</span> <span class="pl-smi">lemons.api.walking.map.Zone</span>;


<span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">TreeChopper</span> <span class="pl-k">extends</span> <span class="pl-e">TaskScript</span> {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onStart</span>() {
        <span class="pl-v">super</span><span class="pl-k">.</span>onStart();

        <span class="pl-c">// Let's add our EquipmentReqTask, which also removes the need</span>
        <span class="pl-c">// (most of the time) for a BankTask. This also have all the</span>
        <span class="pl-c">// API of a regular BankTask.</span>
        <span class="pl-c">// Note the BankTask by default deposits everything, and the</span>
        <span class="pl-c">// EquipmentReqTask won't deposit the equipment it needs at</span>
        <span class="pl-c">// that time.</span>
        addTask(<span class="pl-k">new</span> <span class="pl-smi">EquipmentReqTask</span>()
                <span class="pl-c">// Axe goes in the WEAPON slot, and setup the EquipmentReq</span>
                .addReq(<span class="pl-smi">EquipmentSlot</span><span class="pl-c1"><span class="pl-k">.</span>WEAPON</span>, <span class="pl-k">new</span> <span class="pl-smi">EquipmentReq</span>(<span class="pl-c1">true</span>, <span class="pl-c1">false</span>)
                    <span class="pl-c">// Let's add the Dragon axe</span>
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Dragon axe<span class="pl-pds">"</span></span>)
                        <span class="pl-c">// We can use it for woodcutting at lvl 60</span>
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">60</span>)
                        <span class="pl-c">// We can equip it if we have 60 attack</span>
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">60</span>)
                    <span class="pl-c">// And repeat for the rest</span>
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Rune axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">41</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">40</span>)
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Adamant axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">31</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">30</span>)
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Mithril axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">21</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">20</span>)
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Black axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">11</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">10</span>)
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Steel axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">6</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">5</span>)
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Iron axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">1</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">1</span>)
                    .addItem(<span class="pl-s"><span class="pl-pds">"</span>Bronze axe<span class="pl-pds">"</span></span>)
                        .setUseLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>, <span class="pl-c1">1</span>)
                        .setEquipLevel(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>ATTACK</span>, <span class="pl-c1">1</span>)
        ));

        <span class="pl-c">// Let's walk to the zone, note that the positions are fake!</span>
        <span class="pl-c">// Set to draynor or something, or better yet ask the user.</span>
        addTask(<span class="pl-k">new</span> <span class="pl-smi">WalkingTask</span>(
                <span class="pl-k">new</span> <span class="pl-smi">Zone</span>(<span class="pl-v">this</span>)
                    .rect(<span class="pl-k">new</span> <span class="pl-smi">Position</span>(<span class="pl-c1">1234</span>, <span class="pl-c1">1234</span>, <span class="pl-c1">0</span>), <span class="pl-k">new</span> <span class="pl-smi">Position</span>(<span class="pl-c1">1234</span>, <span class="pl-c1">1234</span>, <span class="pl-c1">0</span>))));

        <span class="pl-c">// Add a couple tree chop tasks</span>
        addTask(() <span class="pl-k">-</span><span class="pl-k">&gt;</span> lvl() <span class="pl-k">&gt;=</span> <span class="pl-c1">15</span>, <span class="pl-k">new</span> <span class="pl-smi">ChopDownTreeTask</span>(<span class="pl-s"><span class="pl-pds">"</span>Oak tree<span class="pl-pds">"</span></span>));
        addTask(<span class="pl-k">new</span> <span class="pl-smi">ChopDownTreeTask</span>(<span class="pl-s"><span class="pl-pds">"</span>Tree<span class="pl-pds">"</span></span>));
    }

    <span class="pl-k">private</span> <span class="pl-k">int</span> <span class="pl-en">lvl</span>() {
        <span class="pl-k">return</span> getSkills()<span class="pl-k">.</span>getStatic(<span class="pl-smi">Skill</span><span class="pl-c1"><span class="pl-k">.</span>WOODCUTTING</span>);
    }

}
</pre></div>

<p>See how easy that was? That is the power of code re-usability with the Task system. No need to re-write code. Things like banking and equipment handling are now as simple as passing some configuration to an existing Task. As such, if some bug is exposed or code needs updating, it's much simpler since the code is only written once, saving time on maintaining your Scripts.</p>

<h2>
<a id="how-do-i-get-started" class="anchor" href="#how-do-i-get-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>How do I get started?</h2>

<p>Just clone the git into the "lemons/api" folder in your projects "src" folder.</p>
      </section>

    </div>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-67011233-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
